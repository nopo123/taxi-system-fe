import{n as y,f as j,h as b,R as u,r as S,j as e,L as B}from"./index-Bn22ju4j.js";import{c as C,a as p,u as z}from"./formik.esm-DcbXOIxt.js";import{O as l}from"./OrganizationService-CHfxAHZE.js";import{C as T}from"./Container-Bx1Kr23n.js";import{B as h,T as k}from"./Box-9N2gnsen.js";import{B as s}from"./Button-D1XRG8Gg.js";import{T as f}from"./TextField-a0JGo00p.js";import"./useThemeProps-DcV2iQdr.js";import"./OutlinedInput-1Wh2PjgD.js";import"./ownerWindow-DvT1GKkC.js";import"./useTheme-Y9mmvfV8.js";import"./useControlled-Di7wUfld.js";import"./Popover-yJMaAJO1.js";import"./createSvgIcon-CQDQQGMN.js";const P=()=>{const{id:r}=y(),{enqueueSnackbar:t}=j(),i=b(),[x,c]=u.useState(!1),[n,m]=u.useState(!r),v={name:"",address:""},g=C({name:p().required("Meno spoločnosti je povinné"),address:p().required("Adresa spoločnosti je povinná")}),a=z({initialValues:v,validationSchema:g,onSubmit:async d=>{try{if(r){await l.update(r,d),t("Spoločnosť bola úspešne aktualizovaná",{variant:"success"}),i("/dashboard/organization");return}await l.create(d),t("Spoločnosť bola úspešne vytvorená",{variant:"success"}),i("/dashboard/organization")}catch(o){t(o.response.data.message,{variant:"error"})}}});return S.useEffect(()=>{r&&(c(!0),(async()=>{try{const o=await l.findOne(r);a.setFieldValue("name",o.name),a.setFieldValue("address",o.address),t("Spoločnosť bola úspešne načítaná",{variant:"success"})}catch(o){t(o.response.data.message,{variant:"error"})}})(),c(!1))},[r]),e.jsx(e.Fragment,{children:x?e.jsx(B,{}):e.jsx(T,{maxWidth:"sm",children:e.jsxs(h,{display:"flex",flexDirection:"column",children:[e.jsx(k,{variant:"h4",gutterBottom:!0,style:{textAlign:"center"},children:"Vytvorenie spoločnosti"}),e.jsx(h,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(s,{variant:"contained",color:"primary",onClick:()=>i("/dashboard/organization"),children:"Späť"})}),e.jsxs("form",{onSubmit:a.handleSubmit,noValidate:!0,children:[e.jsx(f,{fullWidth:!0,id:"name",name:"name",label:"Názov spoločnosti",margin:"normal",value:a.values.name,disabled:!n,variant:n?"outlined":"standard",onChange:a.handleChange,onBlur:a.handleBlur,error:a.touched.name&&!!a.errors.name,helperText:a.touched.name&&a.errors.name}),e.jsx(f,{fullWidth:!0,id:"address",name:"address",label:"Adresa",margin:"normal",disabled:!n,variant:n?"outlined":"standard",value:a.values.address,onChange:a.handleChange,onBlur:a.handleBlur,error:a.touched.address&&!!a.errors.address,helperText:a.touched.address&&a.errors.address}),!r&&e.jsx(s,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{marginTop:2},children:"Vytvorit spoločnosť"}),r&&n&&e.jsx(s,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{marginTop:2},children:"Aktualizovať spoločnosť"}),r&&n&&e.jsx(s,{color:"primary",variant:"contained",fullWidth:!0,sx:{marginTop:2},onClick:()=>m(!1),children:"Zrušiť"}),r&&!n&&e.jsx(s,{color:"primary",variant:"contained",fullWidth:!0,onClick:()=>m(!0),sx:{marginTop:2},children:"Upraviť spoločnosť"})]})]})})})};export{P as default};
