import{f as v,i as j,j as e}from"./index-Bn22ju4j.js";import{u as h,c,a as o,b as g}from"./formik.esm-DcbXOIxt.js";import{U as p}from"./UserService-DBYmU35t.js";import{C as w}from"./Container-Bx1Kr23n.js";import{T as d,P as x,B as l}from"./Box-9N2gnsen.js";import{G as u}from"./Grid-PcO5gwyI.js";import{T as t}from"./TextField-a0JGo00p.js";import{B as f}from"./Button-D1XRG8Gg.js";import"./useThemeProps-DcV2iQdr.js";import"./useTheme-Y9mmvfV8.js";import"./OutlinedInput-1Wh2PjgD.js";import"./ownerWindow-DvT1GKkC.js";import"./useControlled-Di7wUfld.js";import"./Popover-yJMaAJO1.js";import"./createSvgIcon-CQDQQGMN.js";const H=()=>{const{enqueueSnackbar:i}=v(),{user:s}=j(),r=h({initialValues:{firstName:s.firstName,lastName:s.lastName,email:s.email,role:s.role},validationSchema:c({firstName:o().required("Krstné meno je povinné"),lastName:o().required("Priezvisko je povinné"),email:o().email("Neplatný formát emailu").required("Email je povinný"),role:o().required("Rola je povinná")}),onSubmit:async m=>{try{await p.updateUser(s.id,m),i("Údaje boli úspešne aktualizované",{variant:"success"})}catch(n){i(n.response.data.message,{variant:"error"})}}}),a=h({initialValues:{password:"",confirmPassword:""},validationSchema:c({password:o().min(8,"Heslo musí mať aspoň 8 znakov").required("Heslo je povinné"),confirmPassword:o().oneOf([g("password"),null],"Heslá sa musia zhodovať").required("Potvrďte heslo")}),onSubmit:async m=>{try{await p.updatePassword(s.id,m),i("Heslo bolo úspešne aktualizované",{variant:"success"})}catch(n){console.error("Error updating password:",n),i(n.response.message,{variant:"error"})}}});return e.jsx(e.Fragment,{children:e.jsxs(w,{maxWidth:"md",sx:{mt:4},children:[e.jsx(d,{variant:"h4",sx:{mb:3},children:"Nastavenia osobného účtu"}),e.jsxs(u,{container:!0,spacing:4,children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(x,{elevation:3,sx:{p:3,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"350px"},children:e.jsxs(l,{children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Úprava osobných údajov"}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsx(t,{fullWidth:!0,margin:"normal",label:"Krstné meno",name:"firstName",value:r.values.firstName,onChange:r.handleChange,error:r.touched.firstName&&!!r.errors.firstName,helperText:r.touched.firstName&&r.errors.firstName}),e.jsx(t,{fullWidth:!0,margin:"normal",label:"Priezvisko",name:"lastName",value:r.values.lastName,onChange:r.handleChange,error:r.touched.lastName&&!!r.errors.lastName,helperText:r.touched.lastName&&r.errors.lastName}),e.jsx(t,{fullWidth:!0,margin:"normal",label:"Email",name:"email",type:"email",value:r.values.email,onChange:r.handleChange,error:r.touched.email&&!!r.errors.email,helperText:r.touched.email&&r.errors.email}),e.jsx(l,{sx:{textAlign:"right",mt:2},children:e.jsx(f,{type:"submit",variant:"contained",color:"primary",children:"Uložiť zmeny"})})]})]})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(x,{elevation:3,sx:{p:3,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"350px"},children:e.jsxs(l,{children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Zmena hesla"}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsx(t,{fullWidth:!0,margin:"normal",label:"Nové heslo",name:"password",type:"password",value:a.values.password,onChange:a.handleChange,error:a.touched.password&&!!a.errors.password,helperText:a.touched.password&&a.errors.password}),e.jsx(t,{fullWidth:!0,margin:"normal",label:"Potvrďte heslo",name:"confirmPassword",type:"password",value:a.values.confirmPassword,onChange:a.handleChange,error:a.touched.confirmPassword&&!!a.errors.confirmPassword,helperText:a.touched.confirmPassword&&a.errors.confirmPassword}),e.jsx(l,{sx:{textAlign:"right",mt:2},children:e.jsx(f,{type:"submit",variant:"contained",color:"primary",children:"Uložiť heslo"})})]})]})})})]})]})})};export{H as default};
